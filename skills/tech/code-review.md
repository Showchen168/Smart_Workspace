# 🔍 Code Review 規範 Skill

## 【用途】
執行程式碼審查，確保程式碼品質、安全性和可維護性。

---

## 【審查清單】

### 1. 基本檢查
- [ ] 程式碼是否能正常編譯/執行
- [ ] 是否有語法錯誤
- [ ] 是否符合專案的程式碼風格
- [ ] 變數和函數命名是否有意義

### 2. 邏輯檢查
- [ ] 邏輯是否正確
- [ ] 是否有邊界條件處理
- [ ] 是否有適當的錯誤處理
- [ ] 是否有無限迴圈風險
- [ ] 是否有競爭條件 (Race Condition)

### 3. 效能檢查
- [ ] 是否有不必要的迴圈
- [ ] 是否有 N+1 查詢問題
- [ ] 是否有記憶體洩漏風險
- [ ] 是否有適當使用快取
- [ ] 複雜度是否可接受

### 4. 安全性檢查
- [ ] 是否有 SQL Injection 風險
- [ ] 是否有 XSS 風險
- [ ] 是否有敏感資訊外洩
- [ ] 是否有適當的權限檢查
- [ ] 輸入是否有驗證

### 5. 可維護性檢查
- [ ] 程式碼是否易於理解
- [ ] 是否有適當的註解
- [ ] 是否符合 DRY 原則
- [ ] 是否符合單一職責原則
- [ ] 是否有適當的抽象層級

### 6. 測試檢查
- [ ] 是否有對應的單元測試
- [ ] 測試覆蓋率是否足夠
- [ ] 測試案例是否有意義
- [ ] 是否測試了邊界條件

---

## 【嚴重程度分級】

| 等級 | 圖示 | 說明 | 處理方式 |
|------|------|------|----------|
| 嚴重 | 🚨 | 安全漏洞、資料遺失風險 | 必須立即修復 |
| 錯誤 | ❌ | Bug、邏輯錯誤 | 必須修復才能合併 |
| 警告 | ⚠️ | 潛在問題、效能疑慮 | 建議修復 |
| 建議 | 💡 | 改進建議、最佳實踐 | 可選擇性採納 |
| 優點 | ✅ | 做得好的地方 | 正面回饋 |

---

## 【輸出格式】

```markdown
# 🔍 Code Review 報告

## 📊 總覽
| 項目 | 數量 |
|------|------|
| 檔案數量 | X |
| 程式碼行數 | X |
| 嚴重問題 | X |
| 錯誤 | X |
| 警告 | X |
| 建議 | X |

**審查結果**：✅ 通過 / ⚠️ 需修改 / ❌ 不通過

---

## 🚨 嚴重問題

### [問題標題]
**檔案**：`path/to/file.py`
**行數**：L42-L45
**問題**：[描述問題]

```python
# 問題程式碼
[原始程式碼]
```

**建議修改**：
```python
# 修改後程式碼
[建議程式碼]
```

**原因**：[說明為什麼這是問題]

---

## ❌ 錯誤

### [問題標題]
...

---

## ⚠️ 警告

### [問題標題]
...

---

## 💡 建議

### [建議標題]
...

---

## ✅ 優點

1. [優點1]
2. [優點2]

---

## 📝 總結

[整體評價和建議]
```

---

## 【語言特定檢查】

### Python
- [ ] 是否使用 Type Hints
- [ ] 是否符合 PEP 8
- [ ] 是否有使用 f-string
- [ ] 是否適當使用 context manager

### JavaScript/TypeScript
- [ ] 是否使用 const/let 而非 var
- [ ] 是否處理 Promise rejection
- [ ] 是否有使用 TypeScript 嚴格模式
- [ ] 是否避免 any 類型

### SQL
- [ ] 是否使用參數化查詢
- [ ] 是否有適當的索引
- [ ] 是否避免 SELECT *
- [ ] 是否有 N+1 問題

---

## 【審查流程】

1. **理解上下文**：先理解這個變更的目的
2. **大方向審查**：確認整體設計是否合理
3. **細節審查**：逐行檢查程式碼
4. **測試確認**：確認測試覆蓋
5. **撰寫報告**：整理發現的問題和建議
